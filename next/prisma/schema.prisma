// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

enum Role {
  SUPER_ADMIN
  ADMIN
  OPERATOR
}

enum LeadStatus {
  NEW
  CONTACTED
  QUALIFIED
  CONVERTED
  LOST
}

model Contact {
  id           String     @id @default(cuid())
  name         String
  email        String
  phone        String?
  message      String
  status       LeadStatus @default(NEW)
  assignedToId String?    @map("assigned_to_id")
  assignedTo   Admin?     @relation(fields: [assignedToId], references: [id], onDelete: SetNull)
  createdAt    DateTime   @default(now()) @map("created_at")
  updatedAt    DateTime   @updatedAt @map("updated_at")

  @@map("contacts")
}

model Admin {
  id            String     @id @default(cuid())
  email         String     @unique
  password      String
  name          String
  role          Role       @default(ADMIN)
  assignedLeads Contact[]
  blogPosts     BlogPost[]
  createdAt     DateTime   @default(now()) @map("created_at")
  updatedAt     DateTime   @updatedAt @map("updated_at")

  @@map("admins")
}

model BlogPost {
  id        String   @id @default(cuid())
  slug      String   @unique
  published Boolean  @default(false)

  // English (primary)
  titleEn       String  @map("title_en")
  excerptEn     String  @map("excerpt_en")
  contentEn     String  @map("content_en")
  metaTitleEn   String? @map("meta_title_en")
  metaDescEn    String? @map("meta_desc_en")
  keywordsEn    String? @map("keywords_en")

  // French
  titleFr       String? @map("title_fr")
  excerptFr     String? @map("excerpt_fr")
  contentFr     String? @map("content_fr")
  metaTitleFr   String? @map("meta_title_fr")
  metaDescFr    String? @map("meta_desc_fr")
  keywordsFr    String? @map("keywords_fr")

  // Arabic
  titleAr       String? @map("title_ar")
  excerptAr     String? @map("excerpt_ar")
  contentAr     String? @map("content_ar")
  metaTitleAr   String? @map("meta_title_ar")
  metaDescAr    String? @map("meta_desc_ar")
  keywordsAr    String? @map("keywords_ar")

  coverImage String? @map("cover_image")

  authorId  String   @map("author_id")
  author    Admin    @relation(fields: [authorId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  @@map("blog_posts")
}
